{"ast":null,"code":"var _jsxFileName = \"F:\\\\Symbtest\\\\src\\\\components\\\\AICompanion.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport { auth, db, doc, getDoc } from '../firebase';\nimport { analyzeTextMood } from '../services/textMoodAnalysisService';\nimport { fetchCourseContent } from '../services/courseContentService';\nimport { getCachedItem, setCachedItem } from '../utils/cacheUtil';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AICompanion = () => {\n  _s();\n  const [userCourse, setUserCourse] = useState('');\n  const [userInput, setUserInput] = useState('');\n  const [messages, setMessages] = useState([]);\n  const [isLoading, setIsLoading] = useState(false);\n  const [moodAnalysis, setMoodAnalysis] = useState(null);\n  const [recommendations, setRecommendations] = useState(null);\n  const [showRecommendations, setShowRecommendations] = useState(false);\n  const [conversationContext, setConversationContext] = useState({\n    previousMoods: [],\n    lastResponseType: null,\n    repetitiveResponseCount: 0,\n    topicsFocused: []\n  });\n  const messagesEndRef = useRef(null);\n\n  // Fetch user's course from Firebase\n  useEffect(() => {\n    const fetchUserCourse = async () => {\n      try {\n        const user = auth.currentUser;\n        if (!user) {\n          console.log('No user logged in');\n          return;\n        }\n\n        // Get user data from Firestore\n        const userDoc = await getDoc(doc(db, \"users\", user.uid));\n        if (userDoc.exists()) {\n          const userData = userDoc.data();\n          setUserCourse(userData.course || '');\n        } else {\n          console.log('No user data found');\n        }\n      } catch (error) {\n        console.error('Error fetching user course:', error);\n      }\n    };\n    fetchUserCourse();\n  }, []);\n\n  // Scroll to bottom of messages\n  useEffect(() => {\n    if (messagesEndRef.current) {\n      messagesEndRef.current.scrollIntoView({\n        behavior: 'smooth'\n      });\n    }\n  }, [messages]);\n\n  // Initial greeting\n  useEffect(() => {\n    setMessages([{\n      type: 'ai',\n      text: \"Hi there! I'm your AI learning companion. How are you feeling today? Tell me about your mood or what's on your mind, and I'll recommend study approaches that might work best for you right now.\"\n    }]);\n  }, []);\n\n  // Handle sending a message\n  const handleSendMessage = async () => {\n    if (!userInput.trim()) return;\n    const userMessage = {\n      type: 'user',\n      text: userInput\n    };\n    setMessages(prev => [...prev, userMessage]);\n    setUserInput('');\n    setIsLoading(true);\n    try {\n      // Analyze the user's mood from their message\n      const analysis = analyzeTextMood(userInput);\n      setMoodAnalysis(analysis);\n\n      // Update conversation context with new mood\n      setConversationContext(prevContext => {\n        const updatedPreviousMoods = [...prevContext.previousMoods, analysis.mood].slice(-3); // Keep last 3 moods\n\n        // Check if we're getting repetitive responses\n        const isRepetitive = prevContext.lastResponseType === analysis.mood;\n        const repetitiveCount = isRepetitive ? prevContext.repetitiveResponseCount + 1 : 0;\n\n        // Extract potential topics from user input\n        const topicMatches = userInput.match(/\\b(study|learn|read|understand|practice|exam|test|quiz|homework|assignment|project|course|class|subject|topic)\\b/gi) || [];\n        const uniqueTopics = [...new Set([...prevContext.topicsFocused, ...topicMatches])].slice(-5); // Keep last 5 topics\n\n        return {\n          previousMoods: updatedPreviousMoods,\n          lastResponseType: analysis.mood,\n          repetitiveResponseCount: repetitiveCount,\n          topicsFocused: uniqueTopics\n        };\n      });\n\n      // Fetch content recommendations based on mood and course\n      let content = null;\n      if (userCourse) {\n        try {\n          // Create cache key\n          const cacheKey = `content_${userCourse}_${analysis.mood}`;\n\n          // Check cache first\n          content = getCachedItem(cacheKey);\n          if (!content) {\n            // Fetch fresh content\n            content = await fetchCourseContent(userCourse, analysis.mood);\n\n            // Cache the result\n            setCachedItem(cacheKey, content);\n          }\n          setRecommendations(content);\n        } catch (error) {\n          console.error('Error fetching recommendations:', error);\n          // Continue even if recommendations fail\n        }\n      }\n\n      // Generate AI response based on mood analysis\n      setTimeout(() => {\n        const aiResponse = generateResponse(analysis, userCourse);\n        setMessages(prev => [...prev, {\n          type: 'ai',\n          text: aiResponse\n        }]);\n        setIsLoading(false);\n        if (content) {\n          setShowRecommendations(true);\n        }\n      }, 1000);\n    } catch (error) {\n      console.error('Error in message processing:', error);\n\n      // Fallback response for error cases\n      setTimeout(() => {\n        setMessages(prev => [...prev, {\n          type: 'ai',\n          text: \"I'm having trouble understanding your mood right now. Could you tell me more about how you're feeling?\"\n        }]);\n        setIsLoading(false);\n      }, 1000);\n    }\n  };\n\n  // Generate AI response based on mood analysis\n  const generateResponse = (analysis, course) => {\n    const {\n      mood,\n      description,\n      recommendedApproaches\n    } = analysis;\n\n    // Get a random response template based on mood\n    const getRandomResponse = templates => {\n      const randomIndex = Math.floor(Math.random() * templates.length);\n      return templates[randomIndex];\n    };\n\n    // Response templates for different moods\n    const responseTemplates = {\n      sad: [`I'm sorry to hear that you're feeling down. ${description}`, `It sounds like you're having a tough time. When feeling sad, ${description}`, `I understand that sadness can make studying difficult. ${description}`],\n      angry: [`I can sense some frustration in your message. ${description}`, `It seems like you might be feeling annoyed or angry. ${description}`, `When we're feeling frustrated, ${description}`],\n      fearful: [`I notice you might be feeling anxious or worried. ${description}`, `It sounds like you might be experiencing some anxiety. ${description}`, `When feeling uncertain or fearful, ${description}`],\n      disgusted: [`I sense you're feeling averse to something. ${description}`, `It seems like something might be bothering you. ${description}`, `When feeling put off by something, ${description}`],\n      happy: [`That's wonderful! I'm glad you're feeling good. ${description}`, `It's great to hear you're in a positive mood! ${description}`, `Your positive energy is perfect for learning. ${description}`],\n      excited: [`I can feel your enthusiasm! ${description}`, `Your excitement is contagious! ${description}`, `That's great! Your excited state is perfect for tackling challenging material. ${description}`],\n      content: [`It's nice to hear you're feeling content. ${description}`, `A content state of mind is excellent for thoughtful learning. ${description}`, `Being content creates a great foundation for learning. ${description}`],\n      surprised: [`Oh! Something unexpected on your mind? ${description}`, `Surprise can lead to new insights! ${description}`, `Interesting! Surprise often opens us to new perspectives. ${description}`],\n      confused: [`I understand confusion can be frustrating. ${description}`, `When we're confused, it helps to go back to basics. ${description}`, `Confusion is often a step toward deeper understanding. ${description}`],\n      stressed: [`I can tell you might be feeling overwhelmed. ${description}`, `Stress can make learning challenging. ${description}`, `When we're stressed, it helps to break things down into smaller steps. ${description}`],\n      neutral: [`I sense you're in a balanced state of mind. ${description}`, `Your neutral mood is actually great for analytical thinking. ${description}`, `A neutral state can be perfect for objective learning. ${description}`],\n      curious: [`Your curiosity is a powerful learning tool! ${description}`, `I love your inquisitive mindset! ${description}`, `Curiosity drives discovery and learning. ${description}`],\n      motivated: [`I can sense your motivation! ${description}`, `Your drive to learn is inspiring! ${description}`, `That motivated mindset will take you far! ${description}`]\n    };\n\n    // Get appropriate templates or default to neutral\n    const templates = responseTemplates[mood] || responseTemplates.neutral;\n    let response = `${getRandomResponse(templates)} `;\n\n    // Add specific learning approach recommendations\n    if (recommendedApproaches && recommendedApproaches.length > 0) {\n      const approach = recommendedApproaches[Math.floor(Math.random() * recommendedApproaches.length)];\n      response += `One effective approach might be to ${approach.toLowerCase()}. `;\n    }\n\n    // Add course-specific information if available\n    if (course) {\n      const courseResponses = [`Since you're studying ${course}, I've prepared some learning resources that might work well with your current mood.`, `For your ${course} studies, I've found some materials that align with your current learning style.`, `I've selected some ${course} resources that complement how you're feeling right now.`];\n      response += getRandomResponse(courseResponses);\n    } else {\n      const generalResponses = [`I'd recommend focusing on ${analysis.learningStyle.toLowerCase()} right now. Would you like some specific study suggestions?`, `Given your current state, ${analysis.learningStyle.toLowerCase()} might be most effective. Would you like to explore this approach?`, `This might be a good time for ${analysis.learningStyle.toLowerCase()}. Would you like me to elaborate on this?`];\n      response += getRandomResponse(generalResponses);\n    }\n    return response;\n  };\n\n  // Handle key press (Enter to send)\n  const handleKeyPress = e => {\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault();\n      handleSendMessage();\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"bg-[#1F2833] rounded-lg overflow-hidden flex flex-col h-[600px]\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-[#0B0C10] p-4 border-b border-[#45A29E]\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"text-[#66FCF1] font-medium\",\n        children: \"AI Learning Companion\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 282,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-[#CFC6C7] text-sm\",\n        children: \"Share how you're feeling, and I'll recommend study approaches\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 283,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 281,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex-1 overflow-y-auto p-4 space-y-4\",\n      children: [messages.map((message, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `flex ${message.type === 'user' ? 'justify-end' : 'justify-start'}`,\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `max-w-[80%] rounded-lg p-3 ${message.type === 'user' ? 'bg-[#45A29E] text-white' : 'bg-[#0B0C10] text-[#CFC6C7]'}`,\n          children: message.text\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 295,\n          columnNumber: 13\n        }, this)\n      }, `message-${index}-${message.type}`, false, {\n        fileName: _jsxFileName,\n        lineNumber: 291,\n        columnNumber: 11\n      }, this)), isLoading && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex justify-start\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-[#0B0C10] text-[#CFC6C7] rounded-lg p-3 max-w-[80%]\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex space-x-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"w-2 h-2 rounded-full bg-[#66FCF1] animate-bounce\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 311,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"w-2 h-2 rounded-full bg-[#66FCF1] animate-bounce\",\n              style: {\n                animationDelay: '0.2s'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 312,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"w-2 h-2 rounded-full bg-[#66FCF1] animate-bounce\",\n              style: {\n                animationDelay: '0.4s'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 313,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 310,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 309,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 308,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        ref: messagesEndRef\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 319,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 289,\n      columnNumber: 7\n    }, this), showRecommendations && recommendations && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-[#0B0C10] p-4 border-t border-[#45A29E] max-h-[250px] overflow-y-auto\",\n      children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n        className: \"text-[#66FCF1] font-medium mb-3\",\n        children: \"Recommended Resources\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 325,\n        columnNumber: 11\n      }, this), recommendations.videos && recommendations.videos.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n          className: \"text-[#CFC6C7] text-sm font-medium mb-2\",\n          children: \"Videos for your current mood:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 330,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"grid grid-cols-1 sm:grid-cols-2 gap-2\",\n          children: recommendations.videos.slice(0, 2).map(video => /*#__PURE__*/_jsxDEV(\"a\", {\n            href: video.url,\n            target: \"_blank\",\n            rel: \"noopener noreferrer\",\n            className: \"flex items-center bg-[#1F2833] rounded p-2 hover:bg-[#1F2833]/80 transition-colors\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"w-16 h-12 flex-shrink-0 mr-2\",\n              children: /*#__PURE__*/_jsxDEV(\"img\", {\n                src: video.thumbnail,\n                alt: video.title,\n                className: \"w-full h-full object-cover rounded\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 341,\n                columnNumber: 23\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 340,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex-1\",\n              children: /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-[#CFC6C7] text-xs line-clamp-2\",\n                children: video.title\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 348,\n                columnNumber: 23\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 347,\n              columnNumber: 21\n            }, this)]\n          }, `video-${video.id}`, true, {\n            fileName: _jsxFileName,\n            lineNumber: 333,\n            columnNumber: 19\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 331,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 329,\n        columnNumber: 13\n      }, this), recommendations.resources && recommendations.resources.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n          className: \"text-[#CFC6C7] text-sm font-medium mb-2\",\n          children: \"Learning resources:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 359,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"space-y-2\",\n          children: recommendations.resources.slice(0, 2).map((resource, index) => /*#__PURE__*/_jsxDEV(\"a\", {\n            href: resource.url,\n            target: \"_blank\",\n            rel: \"noopener noreferrer\",\n            className: \"block bg-[#1F2833] rounded p-2 hover:bg-[#1F2833]/80 transition-colors\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-[#CFC6C7] text-xs font-medium\",\n              children: resource.title\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 369,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-gray-400 text-xs mt-1\",\n              children: resource.source\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 370,\n              columnNumber: 21\n            }, this)]\n          }, `resource-${resource.source}-${index}`, true, {\n            fileName: _jsxFileName,\n            lineNumber: 362,\n            columnNumber: 19\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 360,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 358,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 324,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"p-4 border-t border-[#45A29E]\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex\",\n        children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n          value: userInput,\n          onChange: e => setUserInput(e.target.value),\n          onKeyPress: handleKeyPress,\n          placeholder: \"Tell me how you're feeling today...\",\n          className: \"flex-1 bg-[#0B0C10] text-[#CFC6C7] rounded-l-lg p-3 focus:outline-none resize-none\",\n          rows: \"2\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 382,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          onClick: handleSendMessage,\n          disabled: isLoading || !userInput.trim(),\n          className: \"bg-[#66FCF1] text-[#0B0C10] px-4 rounded-r-lg font-medium hover:bg-[#45A29E] transition-colors disabled:opacity-50 disabled:cursor-not-allowed\",\n          children: \"Send\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 390,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 381,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 380,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 279,\n    columnNumber: 5\n  }, this);\n};\n_s(AICompanion, \"pojYlQLUAHi4jp+kziR+044UcrU=\");\n_c = AICompanion;\nexport default AICompanion;\nvar _c;\n$RefreshReg$(_c, \"AICompanion\");","map":{"version":3,"names":["React","useState","useEffect","useRef","auth","db","doc","getDoc","analyzeTextMood","fetchCourseContent","getCachedItem","setCachedItem","jsxDEV","_jsxDEV","AICompanion","_s","userCourse","setUserCourse","userInput","setUserInput","messages","setMessages","isLoading","setIsLoading","moodAnalysis","setMoodAnalysis","recommendations","setRecommendations","showRecommendations","setShowRecommendations","conversationContext","setConversationContext","previousMoods","lastResponseType","repetitiveResponseCount","topicsFocused","messagesEndRef","fetchUserCourse","user","currentUser","console","log","userDoc","uid","exists","userData","data","course","error","current","scrollIntoView","behavior","type","text","handleSendMessage","trim","userMessage","prev","analysis","prevContext","updatedPreviousMoods","mood","slice","isRepetitive","repetitiveCount","topicMatches","match","uniqueTopics","Set","content","cacheKey","setTimeout","aiResponse","generateResponse","description","recommendedApproaches","getRandomResponse","templates","randomIndex","Math","floor","random","length","responseTemplates","sad","angry","fearful","disgusted","happy","excited","surprised","confused","stressed","neutral","curious","motivated","response","approach","toLowerCase","courseResponses","generalResponses","learningStyle","handleKeyPress","e","key","shiftKey","preventDefault","className","children","fileName","_jsxFileName","lineNumber","columnNumber","map","message","index","style","animationDelay","ref","videos","video","href","url","target","rel","src","thumbnail","alt","title","id","resources","resource","source","value","onChange","onKeyPress","placeholder","rows","onClick","disabled","_c","$RefreshReg$"],"sources":["F:/Symbtest/src/components/AICompanion.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { auth, db, doc, getDoc } from '../firebase';\nimport { analyzeTextMood } from '../services/textMoodAnalysisService';\nimport { fetchCourseContent } from '../services/courseContentService';\nimport { getCachedItem, setCachedItem } from '../utils/cacheUtil';\n\nconst AICompanion = () => {\n  const [userCourse, setUserCourse] = useState('');\n  const [userInput, setUserInput] = useState('');\n  const [messages, setMessages] = useState([]);\n  const [isLoading, setIsLoading] = useState(false);\n  const [moodAnalysis, setMoodAnalysis] = useState(null);\n  const [recommendations, setRecommendations] = useState(null);\n  const [showRecommendations, setShowRecommendations] = useState(false);\n  const [conversationContext, setConversationContext] = useState({\n    previousMoods: [],\n    lastResponseType: null,\n    repetitiveResponseCount: 0,\n    topicsFocused: []\n  });\n  const messagesEndRef = useRef(null);\n\n  // Fetch user's course from Firebase\n  useEffect(() => {\n    const fetchUserCourse = async () => {\n      try {\n        const user = auth.currentUser;\n\n        if (!user) {\n          console.log('No user logged in');\n          return;\n        }\n\n        // Get user data from Firestore\n        const userDoc = await getDoc(doc(db, \"users\", user.uid));\n\n        if (userDoc.exists()) {\n          const userData = userDoc.data();\n          setUserCourse(userData.course || '');\n        } else {\n          console.log('No user data found');\n        }\n      } catch (error) {\n        console.error('Error fetching user course:', error);\n      }\n    };\n\n    fetchUserCourse();\n  }, []);\n\n  // Scroll to bottom of messages\n  useEffect(() => {\n    if (messagesEndRef.current) {\n      messagesEndRef.current.scrollIntoView({ behavior: 'smooth' });\n    }\n  }, [messages]);\n\n  // Initial greeting\n  useEffect(() => {\n    setMessages([\n      {\n        type: 'ai',\n        text: \"Hi there! I'm your AI learning companion. How are you feeling today? Tell me about your mood or what's on your mind, and I'll recommend study approaches that might work best for you right now.\"\n      }\n    ]);\n  }, []);\n\n  // Handle sending a message\n  const handleSendMessage = async () => {\n    if (!userInput.trim()) return;\n\n    const userMessage = {\n      type: 'user',\n      text: userInput\n    };\n\n    setMessages(prev => [...prev, userMessage]);\n    setUserInput('');\n    setIsLoading(true);\n\n    try {\n      // Analyze the user's mood from their message\n      const analysis = analyzeTextMood(userInput);\n      setMoodAnalysis(analysis);\n\n      // Update conversation context with new mood\n      setConversationContext(prevContext => {\n        const updatedPreviousMoods = [...prevContext.previousMoods, analysis.mood].slice(-3); // Keep last 3 moods\n\n        // Check if we're getting repetitive responses\n        const isRepetitive = prevContext.lastResponseType === analysis.mood;\n        const repetitiveCount = isRepetitive ? prevContext.repetitiveResponseCount + 1 : 0;\n\n        // Extract potential topics from user input\n        const topicMatches = userInput.match(/\\b(study|learn|read|understand|practice|exam|test|quiz|homework|assignment|project|course|class|subject|topic)\\b/gi) || [];\n        const uniqueTopics = [...new Set([...prevContext.topicsFocused, ...topicMatches])].slice(-5); // Keep last 5 topics\n\n        return {\n          previousMoods: updatedPreviousMoods,\n          lastResponseType: analysis.mood,\n          repetitiveResponseCount: repetitiveCount,\n          topicsFocused: uniqueTopics\n        };\n      });\n\n      // Fetch content recommendations based on mood and course\n      let content = null;\n\n      if (userCourse) {\n        try {\n          // Create cache key\n          const cacheKey = `content_${userCourse}_${analysis.mood}`;\n\n          // Check cache first\n          content = getCachedItem(cacheKey);\n\n          if (!content) {\n            // Fetch fresh content\n            content = await fetchCourseContent(userCourse, analysis.mood);\n\n            // Cache the result\n            setCachedItem(cacheKey, content);\n          }\n\n          setRecommendations(content);\n        } catch (error) {\n          console.error('Error fetching recommendations:', error);\n          // Continue even if recommendations fail\n        }\n      }\n\n      // Generate AI response based on mood analysis\n      setTimeout(() => {\n        const aiResponse = generateResponse(analysis, userCourse);\n\n        setMessages(prev => [...prev, {\n          type: 'ai',\n          text: aiResponse\n        }]);\n\n        setIsLoading(false);\n        if (content) {\n          setShowRecommendations(true);\n        }\n      }, 1000);\n    } catch (error) {\n      console.error('Error in message processing:', error);\n\n      // Fallback response for error cases\n      setTimeout(() => {\n        setMessages(prev => [...prev, {\n          type: 'ai',\n          text: \"I'm having trouble understanding your mood right now. Could you tell me more about how you're feeling?\"\n        }]);\n\n        setIsLoading(false);\n      }, 1000);\n    }\n  };\n\n  // Generate AI response based on mood analysis\n  const generateResponse = (analysis, course) => {\n    const { mood, description, recommendedApproaches } = analysis;\n\n    // Get a random response template based on mood\n    const getRandomResponse = (templates) => {\n      const randomIndex = Math.floor(Math.random() * templates.length);\n      return templates[randomIndex];\n    };\n\n    // Response templates for different moods\n    const responseTemplates = {\n      sad: [\n        `I'm sorry to hear that you're feeling down. ${description}`,\n        `It sounds like you're having a tough time. When feeling sad, ${description}`,\n        `I understand that sadness can make studying difficult. ${description}`\n      ],\n      angry: [\n        `I can sense some frustration in your message. ${description}`,\n        `It seems like you might be feeling annoyed or angry. ${description}`,\n        `When we're feeling frustrated, ${description}`\n      ],\n      fearful: [\n        `I notice you might be feeling anxious or worried. ${description}`,\n        `It sounds like you might be experiencing some anxiety. ${description}`,\n        `When feeling uncertain or fearful, ${description}`\n      ],\n      disgusted: [\n        `I sense you're feeling averse to something. ${description}`,\n        `It seems like something might be bothering you. ${description}`,\n        `When feeling put off by something, ${description}`\n      ],\n      happy: [\n        `That's wonderful! I'm glad you're feeling good. ${description}`,\n        `It's great to hear you're in a positive mood! ${description}`,\n        `Your positive energy is perfect for learning. ${description}`\n      ],\n      excited: [\n        `I can feel your enthusiasm! ${description}`,\n        `Your excitement is contagious! ${description}`,\n        `That's great! Your excited state is perfect for tackling challenging material. ${description}`\n      ],\n      content: [\n        `It's nice to hear you're feeling content. ${description}`,\n        `A content state of mind is excellent for thoughtful learning. ${description}`,\n        `Being content creates a great foundation for learning. ${description}`\n      ],\n      surprised: [\n        `Oh! Something unexpected on your mind? ${description}`,\n        `Surprise can lead to new insights! ${description}`,\n        `Interesting! Surprise often opens us to new perspectives. ${description}`\n      ],\n      confused: [\n        `I understand confusion can be frustrating. ${description}`,\n        `When we're confused, it helps to go back to basics. ${description}`,\n        `Confusion is often a step toward deeper understanding. ${description}`\n      ],\n      stressed: [\n        `I can tell you might be feeling overwhelmed. ${description}`,\n        `Stress can make learning challenging. ${description}`,\n        `When we're stressed, it helps to break things down into smaller steps. ${description}`\n      ],\n      neutral: [\n        `I sense you're in a balanced state of mind. ${description}`,\n        `Your neutral mood is actually great for analytical thinking. ${description}`,\n        `A neutral state can be perfect for objective learning. ${description}`\n      ],\n      curious: [\n        `Your curiosity is a powerful learning tool! ${description}`,\n        `I love your inquisitive mindset! ${description}`,\n        `Curiosity drives discovery and learning. ${description}`\n      ],\n      motivated: [\n        `I can sense your motivation! ${description}`,\n        `Your drive to learn is inspiring! ${description}`,\n        `That motivated mindset will take you far! ${description}`\n      ]\n    };\n\n    // Get appropriate templates or default to neutral\n    const templates = responseTemplates[mood] || responseTemplates.neutral;\n    let response = `${getRandomResponse(templates)} `;\n\n    // Add specific learning approach recommendations\n    if (recommendedApproaches && recommendedApproaches.length > 0) {\n      const approach = recommendedApproaches[Math.floor(Math.random() * recommendedApproaches.length)];\n      response += `One effective approach might be to ${approach.toLowerCase()}. `;\n    }\n\n    // Add course-specific information if available\n    if (course) {\n      const courseResponses = [\n        `Since you're studying ${course}, I've prepared some learning resources that might work well with your current mood.`,\n        `For your ${course} studies, I've found some materials that align with your current learning style.`,\n        `I've selected some ${course} resources that complement how you're feeling right now.`\n      ];\n      response += getRandomResponse(courseResponses);\n    } else {\n      const generalResponses = [\n        `I'd recommend focusing on ${analysis.learningStyle.toLowerCase()} right now. Would you like some specific study suggestions?`,\n        `Given your current state, ${analysis.learningStyle.toLowerCase()} might be most effective. Would you like to explore this approach?`,\n        `This might be a good time for ${analysis.learningStyle.toLowerCase()}. Would you like me to elaborate on this?`\n      ];\n      response += getRandomResponse(generalResponses);\n    }\n\n    return response;\n  };\n\n  // Handle key press (Enter to send)\n  const handleKeyPress = (e) => {\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault();\n      handleSendMessage();\n    }\n  };\n\n  return (\n    <div className=\"bg-[#1F2833] rounded-lg overflow-hidden flex flex-col h-[600px]\">\n      {/* Header */}\n      <div className=\"bg-[#0B0C10] p-4 border-b border-[#45A29E]\">\n        <h3 className=\"text-[#66FCF1] font-medium\">AI Learning Companion</h3>\n        <p className=\"text-[#CFC6C7] text-sm\">\n          Share how you're feeling, and I'll recommend study approaches\n        </p>\n      </div>\n\n      {/* Messages */}\n      <div className=\"flex-1 overflow-y-auto p-4 space-y-4\">\n        {messages.map((message, index) => (\n          <div\n            key={`message-${index}-${message.type}`}\n            className={`flex ${message.type === 'user' ? 'justify-end' : 'justify-start'}`}\n          >\n            <div\n              className={`max-w-[80%] rounded-lg p-3 ${\n                message.type === 'user'\n                  ? 'bg-[#45A29E] text-white'\n                  : 'bg-[#0B0C10] text-[#CFC6C7]'\n              }`}\n            >\n              {message.text}\n            </div>\n          </div>\n        ))}\n\n        {isLoading && (\n          <div className=\"flex justify-start\">\n            <div className=\"bg-[#0B0C10] text-[#CFC6C7] rounded-lg p-3 max-w-[80%]\">\n              <div className=\"flex space-x-2\">\n                <div className=\"w-2 h-2 rounded-full bg-[#66FCF1] animate-bounce\" />\n                <div className=\"w-2 h-2 rounded-full bg-[#66FCF1] animate-bounce\" style={{ animationDelay: '0.2s' }} />\n                <div className=\"w-2 h-2 rounded-full bg-[#66FCF1] animate-bounce\" style={{ animationDelay: '0.4s' }} />\n              </div>\n            </div>\n          </div>\n        )}\n\n        <div ref={messagesEndRef} />\n      </div>\n\n      {/* Recommendations Section */}\n      {showRecommendations && recommendations && (\n        <div className=\"bg-[#0B0C10] p-4 border-t border-[#45A29E] max-h-[250px] overflow-y-auto\">\n          <h4 className=\"text-[#66FCF1] font-medium mb-3\">Recommended Resources</h4>\n\n          {/* Videos */}\n          {recommendations.videos && recommendations.videos.length > 0 && (\n            <div className=\"mb-3\">\n              <h5 className=\"text-[#CFC6C7] text-sm font-medium mb-2\">Videos for your current mood:</h5>\n              <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-2\">\n                {recommendations.videos.slice(0, 2).map((video) => (\n                  <a\n                    key={`video-${video.id}`}\n                    href={video.url}\n                    target=\"_blank\"\n                    rel=\"noopener noreferrer\"\n                    className=\"flex items-center bg-[#1F2833] rounded p-2 hover:bg-[#1F2833]/80 transition-colors\"\n                  >\n                    <div className=\"w-16 h-12 flex-shrink-0 mr-2\">\n                      <img\n                        src={video.thumbnail}\n                        alt={video.title}\n                        className=\"w-full h-full object-cover rounded\"\n                      />\n                    </div>\n                    <div className=\"flex-1\">\n                      <p className=\"text-[#CFC6C7] text-xs line-clamp-2\">{video.title}</p>\n                    </div>\n                  </a>\n                ))}\n              </div>\n            </div>\n          )}\n\n          {/* Resources */}\n          {recommendations.resources && recommendations.resources.length > 0 && (\n            <div>\n              <h5 className=\"text-[#CFC6C7] text-sm font-medium mb-2\">Learning resources:</h5>\n              <div className=\"space-y-2\">\n                {recommendations.resources.slice(0, 2).map((resource, index) => (\n                  <a\n                    key={`resource-${resource.source}-${index}`}\n                    href={resource.url}\n                    target=\"_blank\"\n                    rel=\"noopener noreferrer\"\n                    className=\"block bg-[#1F2833] rounded p-2 hover:bg-[#1F2833]/80 transition-colors\"\n                  >\n                    <p className=\"text-[#CFC6C7] text-xs font-medium\">{resource.title}</p>\n                    <p className=\"text-gray-400 text-xs mt-1\">{resource.source}</p>\n                  </a>\n                ))}\n              </div>\n            </div>\n          )}\n        </div>\n      )}\n\n      {/* Input */}\n      <div className=\"p-4 border-t border-[#45A29E]\">\n        <div className=\"flex\">\n          <textarea\n            value={userInput}\n            onChange={(e) => setUserInput(e.target.value)}\n            onKeyPress={handleKeyPress}\n            placeholder=\"Tell me how you're feeling today...\"\n            className=\"flex-1 bg-[#0B0C10] text-[#CFC6C7] rounded-l-lg p-3 focus:outline-none resize-none\"\n            rows=\"2\"\n          />\n          <button\n            type=\"button\"\n            onClick={handleSendMessage}\n            disabled={isLoading || !userInput.trim()}\n            className=\"bg-[#66FCF1] text-[#0B0C10] px-4 rounded-r-lg font-medium hover:bg-[#45A29E] transition-colors disabled:opacity-50 disabled:cursor-not-allowed\"\n          >\n            Send\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default AICompanion;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}